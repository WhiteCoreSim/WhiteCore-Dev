<!-- registration form -->

{IfNoRegistrationsBegin}
  <!--#include file="/noregistrations.html" -->
{IfNoRegistrationsEnd}

{IfRegistrationsBegin}
<div id="error_message" class="error">{ErrorMessage}</div>
<div class="container">
  <h2>{RegistrationText}</h2>
  <div class="row justify-content-center">
    <form id="register_form" action="{SubmitURL}" method="POST">
      <div class="col-12 text-left">

        <div class="row">
          <div class="col-3">
            {AvatarNameText}*
          </div>
          <div class="col-5">
            <input class="form-control" id="AvatarName" maxlength="30" name="AvatarName" size="25" type="text" value="{AvatarName}" />
          </div>
          <div class="col help-block">Enter your avatar name</div>
        </div>

        <div class="row">
          <div class="col-3">
            {AvatarPasswordText}*
          </div>
          <div class="col-5">
            <input class="form-control" id="AvatarPassword" maxlength="15" name="AvatarPassword" size="30" type="password" />
          </div>
          <div class="col help-block">Your login password</div>
        </div>

        <div class="row">
          <div class="col-3">
            {AvatarPasswordConfirmationText}*
          </div>
          <div class="col-5">
            <input class="form-control" id="AvatarPassword2" maxlength="15" name="AvatarPassword2" size="30" type="password" />
          </div>
          <div class="col"></div>
        </div>

        {IsAdminAuthenticatedBegin}
        <!-- Only admins can set scope IDs -->
        <div class="row">
          <div class="col-3">
            <p>{AvatarScopeText}*</p>
          </div>
          <div class="col-5">
            <input class="form-control" id="AvatarScope" maxlength="15" name="AvatarScope" size="40" type="text" placeholder="00000000-0000-0000-0000-000000000000" value=""/>
          </div>
          <div class="col"></div>
        </div>
        {IsAdminAuthenticatedEnd}

        <div class="row">
          <div class="col-3">{FirstNameText}</div>
          <div class="col-5">
            <input class="form-control" id="FirstName" maxlength="15" name="FirstName" size="25" type="text" value="" />
          </div>
          <div class="col-4"></div>
        </div>

        <div class="row">
          <div class="col-3">{LastNameText}</div>
          <div class="col-5">
            <input class="form-control" id="LastName" maxlength="15" name="LastName" size="25" type="text" value="" />
          </div>
          <div class="col"></div>
        </div>

        <!-- greythane - removed as the address details are not really relevant now
        <div class="row">
          <div class="col-3">{UserAddressText}</div>
          <div class="col-5"><input label="UserAddress" id="UserAddress" name="UserAddress" type="text" size="50" maxlength="50" value=""></div>
        </div>
        <div class="rTableRow">
          <div class="col-3">{UserZipText}</div>
          <div class="col-5"><input label="UserZip" id="UserZip" name="UserZip" type="text" size="25" maxlength="15" value=""></div>
        </div>
        -->

        <div class="row">
          <div class="col-3">{UserCityText}</div>
          <div class="col-5">
            <input class="form-control" id="UserCity" maxlength="15" name="UserCity" size="25" type="text" value="" />
          </div>
          <div class="col"></div>
        </div>

        <div class="row">
          <div class="col-3">{UserDOBText}</div>
          <div class="col-5">
              <div class="row">
              <div class="col-4">
                <select class="form-control" id="UserDOBMonth" name="UserDOBMonth">
                {MonthsArrayBegin}
                  <option value="{Value}">{Value}</option>
                {MonthsArrayEnd}
                </select>
              </div>
              <div class="col-4">
                <select class="form-control" id="UserDOBDay" name="UserDOBDay">
                  {DaysArrayBegin}
                  <option value="{Value}">{Value}</option>
                  {DaysArrayEnd}
                </select>
              </div>
              <div class="col-4">
                <select class="form-control" id="UserDOBYear" name="UserDOBYear">
                  {YearsArrayBegin}
                  <option value="{Value}">{Value}</option>
                  {YearsArrayEnd}
                </select>
              </div>
            </div>
          </div>
          <div class="col-4"></div>
        </div>

        <div class="row">
          <div class="col-3">{UserEmailText}*</div>
          <div class="col-5">
            <input class="form-control" id="UserEmail" maxlength="40" name="UserEmail" size="40" type="text" value="" />
          </div>
          <div class="col help-block">(For password recovery only)</div>
        </div>

        <div class="row">
          <div class="col-3">{UserHomeRegionText}*</div>
          <div class="col-5">
            <select class="form-control" id="UserHomeRegion" style="width: 180px;" name="UserHomeRegion">
              {RegionListArrayBegin}
              <option value="{RegionUUID}">{RegionName}</option>
              {RegionListArrayEnd}
            </select>
          </div>
          <div class="col"></div>
        </div>

        {IsAdminAuthenticatedBegin}
        <!-- Only admins can set membership types -->
        <div class="row">
          <div class="col-3">{UserTypeText}*</div>
          <div class="col-5">
            <select class="form-control" id="UserType" style="width: 120px;" name="UserType">
              {UserTypeArrayBegin}
              <option value="{Index}">{Value}</option>
              {UserTypeArrayEnd}
            </select>
          </div>
          <div class="col"></div>
        </div>
        {IsAdminAuthenticatedEnd}

        <div class="row">
          <div class="col-3">Avatar Selection</div>
          <div class="col-6">
            <div id="avatarcarousel" class="carousel slide" data-ride="carousel" style="height: 190px;">
              <div class="carousel-inner">
                {AvatarDefaultArrayBegin}
                <div class="carousel-item active" data-interval="">
                  <img class="d-block rounded float-right" title="{AvatarArchiveName}" src="{AvatarArchiveSnapshotURL}" alt="{AvatarArchiveName}" style="width:150px;height:150px;margin-right:45px;" />
                  <div class="carousel-caption d-none d-md-block" style="right:50%;">
                      <input class="form-check-input" type="radio" id="{AvatarArchiveName}" name="{AvatarArchiveName}" value="{AvatarArchiveName}" checked/>
                      <label class="form-check-label" for="{AvatarArchiveName}">&nbsp;&nbsp{AvatarArchiveName}</label>
                  </div>
                </div>
                {AvatarDefaultArrayEnd}
                {AvatarArchiveArrayBegin}
                <div class="carousel-item" data-interval="">
                  <img class="d-block rounded float-right" title="{AvatarArchiveName}" src="{AvatarArchiveSnapshotURL}" alt="{AvatarArchiveName}"  style="width:150px;height:150px;margin-right:45px;" />
                  <div class="carousel-caption d-none d-md-block" style="right:50%;">
                      <input class="form-check-input" type="radio" id="{AvatarArchiveName}" name="{AvatarArchiveName}"  value="{AvatarArchiveName}" />
                      <label class="form-check-label" for="{AvatarArchiveName}">&nbsp;&nbsp{AvatarArchiveName};</label>
                  </div>
                </div>
                {AvatarArchiveArrayEnd}
              </div>
            </div>

            <a class="carousel-control-prev" href="#avatarcarousel" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#avatarcarousel" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>

          <div class="col"></div>
        </div>

        <div class="row">
          <div class="col-3">{TermsOfServiceText}</div>
          <div class="col" style="height:auto;">
            <textarea class="form-control" id="TosText" cols="90" name="TosText" rows="6">{ToSMessage}</textarea>
          </div>
        </div>

        <div class="row">
          <div class="col-3"></div>
          <div class="col-6 text-right">
            {TermsOfServiceAccept}
          </div>
          <div class="col-3">
            <div class="form-check form-check-inline">
              <input class="form-check-input" id="termscheckbox" name="ToSAccept" type="checkbox" value="Accepted" />
              <label class="form-check-label" for="termscheckbox">{Accept}</label>
            </div>
          </div>

        </div>

        <div class="row">
          <div class="col-9"></div>
          <div class="col-3" style="margin-top:15px;margin-bottom:15px;">
            <input name="action" type="hidden" value="check" />
            <button class="btn btn-lg btn-success" id="Submit" name="Submit" type="Submit">{Submit}</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>


<script>

  $(function() {
    $('.carousel').carousel({
      interval: 5000
    });

    $("#avatarcarousel input[type='radio']").change(function() {
      $("#avatarcarousel input[type='radio']").prop('checked',false);
      $(this).prop('checked', true);
    });

    /* attach a submit handler to the form */
    $("#register_form").submit(function(event) {

      /* stop form from submitting normally */
      event.preventDefault();
      /* get some values from elements on the page: */
      var $form = $( this ),
          url = $form.attr( 'action' );
      /* Send the data using post and put the results in a div */
      $.post( url, $form.serialize(), function( data ) {
  		  $("#error_message").empty().append(data);
      });
    });
  });

</script>

{IfRegistrationsEnd}
